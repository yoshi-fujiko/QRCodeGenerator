Number.prototype.zeroPad||(Number.prototype.zeroPad=function(a){var b=this+a;return b.toString().substr(1)}),String.prototype.chgEntity||(String.prototype.chgEntity=function(a){var b=function(a){return a.toString().replace(/\\/g,"\\\\").replace(/\^/g,"\\^").replace(/\$/g,"\\$").replace(/\./g,"\\.").replace(/\*/g,"\\*").replace(/\+/g,"\\+").replace(/\?/g,"\\?").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\{/g,"\\{").replace(/\}/g,"\\}").replace(/\|/g,"\\|").replace(/\=/g,"\\=").replace(/\!/g,"\\!").replace(/\:/g,"\\:").replace(/\-/g,"\\-")},c=new Array("&",'"',"<",">"),d={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"};if("object"==typeof a)for(var e in a)d[e]=a[e],c.push(b(e));var f=new RegExp(c.join("|"),"g"),g=function(a){return d[a]};return this.replace(f,g)});var PAGEINFO;!function(a){a.GetTabInfo=function(){this.getTabObject()};var b=a.GetTabInfo.prototype;b.getTabObject=function(){chrome.tabs.getSelected(null,function(a){new CRTE.SetPage(a),new QRGENE.SetQr(a.url)})}}(PAGEINFO||(PAGEINFO={}));var CRTE;!function(a){a.SetPage=function(a){this.title=a.title,this.url=a.url,this.favicon=a.favIconUrl,this.noFavicon="./img/nofavicon.png",this.pgTtl=$(".pgTtl"),this.qrUrl=$(".qrUrl"),this.init()};var b=a.SetPage.prototype;b.init=function(){this.setTitle(),this.setFavicon(),this.setUrl(),this.setHistory()},b.setTitle=function(){this.pgTtl.html(this.title.chgEntity())},b.setFavicon=function(){this.favicon||(this.favicon=this.noFavicon),this.pgTtl.css("background-image","url("+this.favicon+")")},b.setUrl=function(){this.qrUrl.html(this.url)},b.setHistory=function(){webStorage.setData(this.title,this.url,this.favicon)}}(CRTE||(CRTE={}));var QRGENE;!function(a){a.SetQr=function(a){this.url=encodeURIComponent(a),this.qrImg=$(".qrImg"),this.qrSize=$(".qrsize"),this.qrImgSize=[100,150,200],this.qrChart="https://chart.googleapis.com/chart?cht=qr&chld=L|1&chco=0099cc",this.init()};var b=a.SetQr.prototype;b.init=function(){var a=this.getCookieSize();this.setQrAreaSize(a),this.setSizeRange(a),this.setQrImg(a),this.getImgSize(a)},b.getCookieSize=function(){return cookVal=$.cookie("QRSIZE"),cookVal||(cookVal=1),cookVal},b.setQrAreaSize=function(a){this.qrImg.width(this.qrImgSize[a]+"px"),this.qrImg.height(this.qrImgSize[a]+"px")},b.createQrPath=function(a){var b=this.qrChart+"&chs="+this.qrImgSize[a]+"x"+this.qrImgSize[a]+"&chl="+this.url;return b},b.setQrImg=function(a){var b=this.createQrPath(a),c=$("<img/>").attr("src",b);this.qrImg.html(c)},b.setSizeRange=function(a){this.qrSize.val(a)},b.getImgSize=function(){var a,b=this;this.qrSize.on("change",function(){a=$(this).val(),$.cookie("QRSIZE",a,{expires:700,path:"/"}),b.resetImg(),b.setQrAreaSize(a),b.setQrImg(a)})},b.resetImg=function(){this.qrImg.html("")}}(QRGENE||(QRGENE={}));var STRG;!function(a){a.WebStorage=function(){this.strg=localStorage,this.num=0,this.max=20};var b=a.WebStorage.prototype;b.dataNum=function(){return localStorage.length},b.setData=function(a,b,c){var d,e;(e=this.chkDiffData(b))&&this.rmData(e),this.setRegNumber(),d=this.num+1,this.strg.num=d;var f=JSON.stringify(this.createData(d,a,b,c));this.strg[d]=f,this.shiftData()},b.shiftData=function(){if(this.dataNum()-1>this.max){var a=this.getAllData()[0].no;this.rmData(a)}},b.getData=function(a){return JSON.parse(this.strg.getItem(a))},b.rmData=function(a){this.strg.removeItem(a)},b.clearData=function(){this.strg.clear()},b.chkDiffData=function(a){var b,c;for(var d in this.strg)b=JSON.parse(this.strg.getItem(d)),b.url===a&&(c=d);return c},b.setRegNumber=function(){this.dataNum()>0&&(this.num=this.getData("num"))},b.getAllData=function(){var a=[];for(var b in this.strg)"num"!==b&&(a[b]=JSON.parse(this.strg.getItem(b)));return a.filter(function(a){return""!==a})},b.createData=function(a,b,c,d){var e={no:a,title:b,url:c,favicon:d,regDate:this.setDate()};return e},b.setDate=function(){var a=new Date,b=a.getFullYear(),c=a.getMonth()+1,d=a.getDay(),e=a.getHours(),f=a.getMinutes();return b+"/"+c.zeroPad(100)+"/"+d.zeroPad(100)+" "+e.zeroPad(100)+":"+f.zeroPad(100)}}(STRG||(STRG={}));var webStorage=new STRG.WebStorage;new PAGEINFO.GetTabInfo;